"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkceritaapp"] = self["webpackChunkceritaapp"] || []).push([["src_utils_notification-helper_js"],{

/***/ "./src/utils/notification-helper.js":
/*!******************************************!*\
  !*** ./src/utils/notification-helper.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isCurrentPushSubscriptionAvailable: () => (/* binding */ isCurrentPushSubscriptionAvailable),\n/* harmony export */   subscribe: () => (/* binding */ subscribe),\n/* harmony export */   togglePushNotification: () => (/* binding */ togglePushNotification),\n/* harmony export */   unsubscribe: () => (/* binding */ unsubscribe),\n/* harmony export */   updateSubscriptionButtonText: () => (/* binding */ updateSubscriptionButtonText),\n/* harmony export */   urlBase64ToUint8Array: () => (/* binding */ urlBase64ToUint8Array)\n/* harmony export */ });\n/* harmony import */ var _api_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../api/api.js */ \"./src/api/api.js\");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config.js */ \"./src/config.js\");\n\r\n\r\n\r\n// Convert base64 string to Uint8Array\r\nfunction urlBase64ToUint8Array(base64String) {\r\n  try {\r\n    const padding = '='.repeat((4 - base64String.length % 4) % 4);\r\n    const base64 = (base64String + padding).replace(/-/g, '+').replace(/_/g, '/');\r\n\r\n    const rawData = window.atob(base64);\r\n    const outputArray = new Uint8Array(rawData.length);\r\n\r\n    for (let i = 0; i < rawData.length; ++i) {\r\n      outputArray[i] = rawData.charCodeAt(i);\r\n    }\r\n    return outputArray;\r\n  } catch (error) {\r\n    console.error('Error converting base64 to Uint8Array:', error);\r\n    throw new Error('Gagal memproses VAPID key');\r\n  }\r\n}\r\n\r\n// Pastikan service worker terdaftar\r\nasync function registerServiceWorker() {\r\n  if (!('serviceWorker' in navigator)) {\r\n    throw new Error('Service Worker tidak didukung browser ini');\r\n  }\r\n\r\n  try {\r\n    // Coba daftarkan service worker jika belum terdaftar\r\n    const registration = await navigator.serviceWorker.register('/sw.js', {\r\n      scope: '/'\r\n    });\r\n    console.log('Service Worker berhasil didaftarkan:', registration);\r\n    \r\n    // Tunggu hingga service worker aktif\r\n    if (registration.installing) {\r\n      console.log('Service worker sedang diinstall');\r\n      return new Promise((resolve) => {\r\n        registration.installing.addEventListener('statechange', (e) => {\r\n          if (e.target.state === 'activated') {\r\n            console.log('Service worker telah aktif');\r\n            resolve(registration);\r\n          }\r\n        });\r\n      });\r\n    }\r\n    \r\n    return registration;\r\n  } catch (error) {\r\n    console.error('Gagal mendaftarkan Service Worker:', error);\r\n    throw new Error('Gagal mendaftarkan Service Worker: ' + error.message);\r\n  }\r\n}\r\n\r\n// Check if push subscription is available\r\nasync function isCurrentPushSubscriptionAvailable() {\r\n  if (!('serviceWorker' in navigator)) {\r\n    console.error('Service Worker API tidak didukung');\r\n    return false;\r\n  }\r\n\r\n  try {\r\n    // Pastikan service worker sudah ready\r\n    const registration = await navigator.serviceWorker.getRegistration();\r\n    if (!registration) {\r\n      console.error('Service worker tidak terdaftar');\r\n      return false;\r\n    }\r\n\r\n    const subscription = await registration.pushManager.getSubscription();\r\n    return subscription !== null;\r\n  } catch (error) {\r\n    console.error('Error checking subscription:', error);\r\n    return false;\r\n  }\r\n}\r\n\r\n// Fungsi untuk membuat simulasi subscription (untuk demo)\r\nfunction createDummySubscription() {\r\n  // Buat subscription dummy untuk simulasi\r\n  const dummyEndpoint = 'https://fcm.googleapis.com/fcm/send/dummy-endpoint-' + Date.now();\r\n  \r\n  // Simpan endpoint dummy di localStorage untuk digunakan saat unsubscribe\r\n  localStorage.setItem('dummyEndpoint', dummyEndpoint);\r\n  \r\n  return {\r\n    endpoint: dummyEndpoint,\r\n    keys: {\r\n      p256dh: 'BNcUZu3bKdxQYXTgXUPQtCmRKVWLPHX5zHzPsxZNPNYjxpbzDOiidRrNUEHrPbgHxlhIjxQOFDG4CJKuES2qx2E=',\r\n      auth: 'dummyAuthSecret'\r\n    }\r\n  };\r\n}\r\n\r\n// Subscribe to push notifications\r\nasync function subscribe() {\r\n  console.log('Subscribe function called');\r\n  \r\n  // Cek dukungan notifikasi\r\n  if (!('Notification' in window)) {\r\n    console.error('Browser tidak mendukung notifikasi');\r\n    alert('Browser tidak mendukung notifikasi.');\r\n    return false;\r\n  }\r\n\r\n  // Cek dukungan service worker\r\n  if (!('serviceWorker' in navigator)) {\r\n    console.error('Browser tidak mendukung Service Worker');\r\n    alert('Service Worker tidak didukung browser ini.');\r\n    return false;\r\n  }\r\n\r\n  // Cek izin notifikasi\r\n  if (Notification.permission === 'denied') {\r\n    console.error('Izin notifikasi ditolak');\r\n    alert('Izin notifikasi ditolak. Silakan ubah pengaturan browser Anda.');\r\n    return false;\r\n  }\r\n\r\n  try {\r\n    // Minta izin notifikasi jika belum diatur\r\n    if (Notification.permission !== 'granted') {\r\n      console.log('Requesting notification permission...');\r\n      const permission = await Notification.requestPermission();\r\n      if (permission !== 'granted') {\r\n        console.error('Izin notifikasi tidak diberikan');\r\n        alert('Izin notifikasi tidak diberikan.');\r\n        return false;\r\n      }\r\n    }\r\n\r\n    // Daftarkan service worker jika belum\r\n    console.log('Registering service worker...');\r\n    let registration;\r\n    try {\r\n      registration = await registerServiceWorker();\r\n      console.log('Service worker is ready:', registration);\r\n    } catch (error) {\r\n      console.error('Error registering service worker:', error);\r\n      // Jika gagal mendaftarkan service worker, gunakan simulasi untuk demo\r\n      alert('Gagal mendaftarkan service worker, menggunakan mode simulasi.');\r\n      \r\n      // Simpan status langganan di localStorage untuk simulasi\r\n      localStorage.setItem('pushSubscribed', 'true');\r\n      \r\n      // Kirim data ke server (simulasi)\r\n      const token = localStorage.getItem('token');\r\n      if (!token) {\r\n        alert('Anda harus login terlebih dahulu.');\r\n        return false;\r\n      }\r\n      \r\n      // Gunakan subscription dummy\r\n      const dummySubscription = createDummySubscription();\r\n      await (0,_api_api_js__WEBPACK_IMPORTED_MODULE_0__.subscribePushNotification)(token, dummySubscription);\r\n      \r\n      alert('Berhasil berlangganan notifikasi! (Mode Simulasi)');\r\n      return true;\r\n    }\r\n    \r\n    // Cek VAPID_PUBLIC_KEY\r\n    console.log('Checking VAPID_PUBLIC_KEY:', _config_js__WEBPACK_IMPORTED_MODULE_1__.VAPID_PUBLIC_KEY);\r\n    if (!_config_js__WEBPACK_IMPORTED_MODULE_1__.VAPID_PUBLIC_KEY) {\r\n      console.error('VAPID_PUBLIC_KEY tidak tersedia');\r\n      alert('Konfigurasi VAPID key tidak tersedia.');\r\n      return false;\r\n    }\r\n\r\n    // Konversi VAPID key\r\n    console.log('Converting VAPID key to Uint8Array...');\r\n    const applicationServerKey = urlBase64ToUint8Array(_config_js__WEBPACK_IMPORTED_MODULE_1__.VAPID_PUBLIC_KEY);\r\n    \r\n    // Coba subscribe dengan pendekatan sederhana\r\n    console.log('Subscribing to push service...');\r\n    let subscription;\r\n    try {\r\n      subscription = await registration.pushManager.subscribe({\r\n        userVisibleOnly: true,\r\n        applicationServerKey: applicationServerKey\r\n      });\r\n      console.log('Successfully subscribed to push service:', subscription);\r\n    } catch (error) {\r\n      console.error('Error subscribing to push service:', error);\r\n      \r\n      if (error.name === 'NotAllowedError') {\r\n        alert('Izin notifikasi ditolak oleh browser. Periksa pengaturan izin browser Anda.');\r\n      } else if (error.message && error.message.includes('push service')) {\r\n        // Jika gagal karena push service error, gunakan simulasi\r\n        alert('Layanan push tidak tersedia, menggunakan mode simulasi.');\r\n        \r\n        // Simpan status langganan di localStorage untuk simulasi\r\n        localStorage.setItem('pushSubscribed', 'true');\r\n        \r\n        // Kirim data ke server (simulasi)\r\n        const token = localStorage.getItem('token');\r\n        if (!token) {\r\n          alert('Anda harus login terlebih dahulu.');\r\n          return false;\r\n        }\r\n        \r\n        // Gunakan subscription dummy\r\n        const dummySubscription = createDummySubscription();\r\n        await (0,_api_api_js__WEBPACK_IMPORTED_MODULE_0__.subscribePushNotification)(token, dummySubscription);\r\n        \r\n        alert('Berhasil berlangganan notifikasi! (Mode Simulasi)');\r\n        return true;\r\n      } else {\r\n        alert(`Gagal berlangganan: ${error.message}`);\r\n      }\r\n      return false;\r\n    }\r\n\r\n    if (!subscription) {\r\n      console.error('Failed to get subscription object');\r\n      alert('Gagal mendapatkan subscription. Coba lagi nanti.');\r\n      return false;\r\n    }\r\n\r\n    // Kirim data ke server\r\n    const token = localStorage.getItem('token');\r\n    console.log('Token available:', !!token);\r\n    \r\n    if (!token) {\r\n      console.error('Token tidak tersedia');\r\n      alert('Anda harus login terlebih dahulu.');\r\n      return false;\r\n    }\r\n\r\n    // Kirim subscription ke server\r\n    console.log('Sending subscription to server...');\r\n    const response = await (0,_api_api_js__WEBPACK_IMPORTED_MODULE_0__.subscribePushNotification)(token, subscription);\r\n    console.log('Server response:', response);\r\n    \r\n    if (response.error) {\r\n      console.error('Server error:', response.message);\r\n      alert(`Server error: ${response.message}`);\r\n      return false;\r\n    }\r\n\r\n    console.log('Successfully subscribed to push notifications');\r\n    alert('Berhasil berlangganan notifikasi!');\r\n    return true;\r\n  } catch (error) {\r\n    console.error('Error subscribing to push notifications:', error);\r\n    alert(`Gagal berlangganan: ${error.message}`);\r\n    return false;\r\n  }\r\n}\r\n\r\n// Unsubscribe from push notifications\r\nasync function unsubscribe() {\r\n  try {\r\n    // Jika menggunakan mode simulasi, hapus status dari localStorage\r\n    if (localStorage.getItem('pushSubscribed') === 'true') {\r\n      // Kirim permintaan unsubscribe ke server untuk mode simulasi juga\r\n      const token = localStorage.getItem('token');\r\n      if (!token) {\r\n        alert('Anda harus login terlebih dahulu.');\r\n        return false;\r\n      }\r\n      \r\n      // Gunakan endpoint dummy yang disimpan saat subscribe\r\n      const dummyEndpoint = localStorage.getItem('dummyEndpoint') || \r\n                            'https://fcm.googleapis.com/fcm/send/dummy-endpoint-simulation';\r\n      \r\n      console.log('Mengirim permintaan unsubscribe (mode simulasi):', dummyEndpoint);\r\n      // Kirim permintaan unsubscribe ke server\r\n      const response = await (0,_api_api_js__WEBPACK_IMPORTED_MODULE_0__.unsubscribePushNotification)(token, dummyEndpoint);\r\n      console.log('Server response untuk unsubscribe (simulasi):', response);\r\n      \r\n      localStorage.removeItem('pushSubscribed');\r\n      localStorage.removeItem('dummyEndpoint');\r\n      alert('Berhasil berhenti berlangganan notifikasi! (Mode Simulasi)');\r\n      return true;\r\n    }\r\n    \r\n    if (!('serviceWorker' in navigator)) {\r\n      alert('Service Worker tidak didukung browser ini.');\r\n      return false;\r\n    }\r\n\r\n    const registration = await navigator.serviceWorker.getRegistration();\r\n    if (!registration) {\r\n      alert('Service worker belum terdaftar.');\r\n      return false;\r\n    }\r\n    \r\n    const subscription = await registration.pushManager.getSubscription();\r\n    if (!subscription) {\r\n      alert('Anda belum berlangganan notifikasi.');\r\n      return false;\r\n    }\r\n\r\n    // Simpan endpoint sebelum unsubscribe\r\n    const endpoint = subscription.endpoint;\r\n    console.log('Endpoint yang akan dihapus:', endpoint);\r\n    \r\n    // Unsubscribe dari push manager\r\n    const result = await subscription.unsubscribe();\r\n    if (!result) {\r\n      alert('Gagal berhenti berlangganan.');\r\n      return false;\r\n    }\r\n    \r\n    console.log('Berhasil unsubscribe dari push manager');\r\n    \r\n    // Kirim data ke server untuk unsubscribe\r\n    const token = localStorage.getItem('token');\r\n    if (!token) {\r\n      alert('Anda harus login terlebih dahulu.');\r\n      return false;\r\n    }\r\n    \r\n    console.log('Mengirim permintaan unsubscribe ke server dengan endpoint:', endpoint);\r\n    const response = await (0,_api_api_js__WEBPACK_IMPORTED_MODULE_0__.unsubscribePushNotification)(token, endpoint);\r\n    console.log('Server response untuk unsubscribe:', response);\r\n    \r\n    alert('Berhasil berhenti berlangganan notifikasi!');\r\n    return true;\r\n  } catch (error) {\r\n    console.error('Gagal unsubscribe:', error);\r\n    alert(`Gagal berhenti berlangganan: ${error.message}`);\r\n    return false;\r\n  }\r\n}\r\n\r\n// Fungsi untuk memperbarui teks tombol berdasarkan status langganan\r\nasync function updateSubscriptionButtonText(button) {\r\n  button.disabled = true;\r\n  \r\n  try {\r\n    // Cek mode simulasi terlebih dahulu\r\n    const isSimulationMode = localStorage.getItem('pushSubscribed') === 'true';\r\n    \r\n    // Jika mode simulasi aktif, gunakan status dari localStorage\r\n    if (isSimulationMode) {\r\n      button.textContent = 'Unsubscribe Push Notification';\r\n      button.classList.remove('subscribe');\r\n      button.classList.add('unsubscribe');\r\n      button.disabled = false;\r\n      return;\r\n    }\r\n    \r\n    // Jika bukan mode simulasi, cek status langganan sebenarnya\r\n    const isSubscribed = await isCurrentPushSubscriptionAvailable();\r\n    \r\n    if (isSubscribed) {\r\n      button.textContent = 'Unsubscribe Push Notification';\r\n      button.classList.remove('subscribe');\r\n      button.classList.add('unsubscribe');\r\n    } else {\r\n      button.textContent = 'Subscribe Push Notification';\r\n      button.classList.remove('unsubscribe');\r\n      button.classList.add('subscribe');\r\n    }\r\n  } catch (error) {\r\n    console.error('Error checking subscription status:', error);\r\n    button.textContent = 'Push Notification Error';\r\n  } finally {\r\n    button.disabled = false;\r\n  }\r\n}\r\n\r\n// Fungsi untuk toggle push notification\r\nasync function togglePushNotification(button) {\r\n  button.disabled = true;\r\n  button.textContent = 'Memproses...';\r\n  \r\n  try {\r\n    // Cek mode simulasi terlebih dahulu\r\n    const isSimulationMode = localStorage.getItem('pushSubscribed') === 'true';\r\n    \r\n    // Jika mode simulasi aktif, gunakan status dari localStorage\r\n    if (isSimulationMode) {\r\n      await unsubscribe();\r\n      console.log('Unsubscribed from push notification (simulation mode)');\r\n    } else {\r\n      // Jika bukan mode simulasi, cek status langganan sebenarnya\r\n      const isSubscribed = await isCurrentPushSubscriptionAvailable();\r\n      \r\n      if (isSubscribed) {\r\n        await unsubscribe();\r\n        console.log('Unsubscribed from push notification');\r\n      } else {\r\n        await subscribe();\r\n        console.log('Subscribed to push notification');\r\n      }\r\n    }\r\n    \r\n    // Update teks tombol setelah toggle\r\n    await updateSubscriptionButtonText(button);\r\n    return true;\r\n  } catch (error) {\r\n    console.error('Error toggling push notification:', error);\r\n    button.disabled = false;\r\n    throw error;\r\n  }\r\n}\r\n\r\n// Ekspor semua fungsi yang dibutuhkan\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHdFQUEyQjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLDBDQUEwQyxjQUFjO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2VyaXRhYXBwLy4vc3JjL3V0aWxzL25vdGlmaWNhdGlvbi1oZWxwZXIuanM/MGMwZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzdWJzY3JpYmVQdXNoTm90aWZpY2F0aW9uLCB1bnN1YnNjcmliZVB1c2hOb3RpZmljYXRpb24gfSBmcm9tICcuLi9hcGkvYXBpLmpzJztcclxuaW1wb3J0IHsgVkFQSURfUFVCTElDX0tFWSB9IGZyb20gJy4uL2NvbmZpZy5qcyc7XHJcblxyXG4vLyBDb252ZXJ0IGJhc2U2NCBzdHJpbmcgdG8gVWludDhBcnJheVxyXG5mdW5jdGlvbiB1cmxCYXNlNjRUb1VpbnQ4QXJyYXkoYmFzZTY0U3RyaW5nKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHBhZGRpbmcgPSAnPScucmVwZWF0KCg0IC0gYmFzZTY0U3RyaW5nLmxlbmd0aCAlIDQpICUgNCk7XHJcbiAgICBjb25zdCBiYXNlNjQgPSAoYmFzZTY0U3RyaW5nICsgcGFkZGluZykucmVwbGFjZSgvLS9nLCAnKycpLnJlcGxhY2UoL18vZywgJy8nKTtcclxuXHJcbiAgICBjb25zdCByYXdEYXRhID0gd2luZG93LmF0b2IoYmFzZTY0KTtcclxuICAgIGNvbnN0IG91dHB1dEFycmF5ID0gbmV3IFVpbnQ4QXJyYXkocmF3RGF0YS5sZW5ndGgpO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmF3RGF0YS5sZW5ndGg7ICsraSkge1xyXG4gICAgICBvdXRwdXRBcnJheVtpXSA9IHJhd0RhdGEuY2hhckNvZGVBdChpKTtcclxuICAgIH1cclxuICAgIHJldHVybiBvdXRwdXRBcnJheTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgY29udmVydGluZyBiYXNlNjQgdG8gVWludDhBcnJheTonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0dhZ2FsIG1lbXByb3NlcyBWQVBJRCBrZXknKTtcclxuICB9XHJcbn1cclxuXHJcbi8vIFBhc3Rpa2FuIHNlcnZpY2Ugd29ya2VyIHRlcmRhZnRhclxyXG5hc3luYyBmdW5jdGlvbiByZWdpc3RlclNlcnZpY2VXb3JrZXIoKSB7XHJcbiAgaWYgKCEoJ3NlcnZpY2VXb3JrZXInIGluIG5hdmlnYXRvcikpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcignU2VydmljZSBXb3JrZXIgdGlkYWsgZGlkdWt1bmcgYnJvd3NlciBpbmknKTtcclxuICB9XHJcblxyXG4gIHRyeSB7XHJcbiAgICAvLyBDb2JhIGRhZnRhcmthbiBzZXJ2aWNlIHdvcmtlciBqaWthIGJlbHVtIHRlcmRhZnRhclxyXG4gICAgY29uc3QgcmVnaXN0cmF0aW9uID0gYXdhaXQgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVnaXN0ZXIoJy9zdy5qcycsIHtcclxuICAgICAgc2NvcGU6ICcvJ1xyXG4gICAgfSk7XHJcbiAgICBjb25zb2xlLmxvZygnU2VydmljZSBXb3JrZXIgYmVyaGFzaWwgZGlkYWZ0YXJrYW46JywgcmVnaXN0cmF0aW9uKTtcclxuICAgIFxyXG4gICAgLy8gVHVuZ2d1IGhpbmdnYSBzZXJ2aWNlIHdvcmtlciBha3RpZlxyXG4gICAgaWYgKHJlZ2lzdHJhdGlvbi5pbnN0YWxsaW5nKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdTZXJ2aWNlIHdvcmtlciBzZWRhbmcgZGlpbnN0YWxsJyk7XHJcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgIHJlZ2lzdHJhdGlvbi5pbnN0YWxsaW5nLmFkZEV2ZW50TGlzdGVuZXIoJ3N0YXRlY2hhbmdlJywgKGUpID0+IHtcclxuICAgICAgICAgIGlmIChlLnRhcmdldC5zdGF0ZSA9PT0gJ2FjdGl2YXRlZCcpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1NlcnZpY2Ugd29ya2VyIHRlbGFoIGFrdGlmJyk7XHJcbiAgICAgICAgICAgIHJlc29sdmUocmVnaXN0cmF0aW9uKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiByZWdpc3RyYXRpb247XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0dhZ2FsIG1lbmRhZnRhcmthbiBTZXJ2aWNlIFdvcmtlcjonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0dhZ2FsIG1lbmRhZnRhcmthbiBTZXJ2aWNlIFdvcmtlcjogJyArIGVycm9yLm1lc3NhZ2UpO1xyXG4gIH1cclxufVxyXG5cclxuLy8gQ2hlY2sgaWYgcHVzaCBzdWJzY3JpcHRpb24gaXMgYXZhaWxhYmxlXHJcbmFzeW5jIGZ1bmN0aW9uIGlzQ3VycmVudFB1c2hTdWJzY3JpcHRpb25BdmFpbGFibGUoKSB7XHJcbiAgaWYgKCEoJ3NlcnZpY2VXb3JrZXInIGluIG5hdmlnYXRvcikpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1NlcnZpY2UgV29ya2VyIEFQSSB0aWRhayBkaWR1a3VuZycpO1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIC8vIFBhc3Rpa2FuIHNlcnZpY2Ugd29ya2VyIHN1ZGFoIHJlYWR5XHJcbiAgICBjb25zdCByZWdpc3RyYXRpb24gPSBhd2FpdCBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5nZXRSZWdpc3RyYXRpb24oKTtcclxuICAgIGlmICghcmVnaXN0cmF0aW9uKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1NlcnZpY2Ugd29ya2VyIHRpZGFrIHRlcmRhZnRhcicpO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc3Vic2NyaXB0aW9uID0gYXdhaXQgcmVnaXN0cmF0aW9uLnB1c2hNYW5hZ2VyLmdldFN1YnNjcmlwdGlvbigpO1xyXG4gICAgcmV0dXJuIHN1YnNjcmlwdGlvbiAhPT0gbnVsbDtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgY2hlY2tpbmcgc3Vic2NyaXB0aW9uOicsIGVycm9yKTtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbn1cclxuXHJcbi8vIEZ1bmdzaSB1bnR1ayBtZW1idWF0IHNpbXVsYXNpIHN1YnNjcmlwdGlvbiAodW50dWsgZGVtbylcclxuZnVuY3Rpb24gY3JlYXRlRHVtbXlTdWJzY3JpcHRpb24oKSB7XHJcbiAgLy8gQnVhdCBzdWJzY3JpcHRpb24gZHVtbXkgdW50dWsgc2ltdWxhc2lcclxuICBjb25zdCBkdW1teUVuZHBvaW50ID0gJ2h0dHBzOi8vZmNtLmdvb2dsZWFwaXMuY29tL2ZjbS9zZW5kL2R1bW15LWVuZHBvaW50LScgKyBEYXRlLm5vdygpO1xyXG4gIFxyXG4gIC8vIFNpbXBhbiBlbmRwb2ludCBkdW1teSBkaSBsb2NhbFN0b3JhZ2UgdW50dWsgZGlndW5ha2FuIHNhYXQgdW5zdWJzY3JpYmVcclxuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZHVtbXlFbmRwb2ludCcsIGR1bW15RW5kcG9pbnQpO1xyXG4gIFxyXG4gIHJldHVybiB7XHJcbiAgICBlbmRwb2ludDogZHVtbXlFbmRwb2ludCxcclxuICAgIGtleXM6IHtcclxuICAgICAgcDI1NmRoOiAnQk5jVVp1M2JLZHhRWVhUZ1hVUFF0Q21SS1ZXTFBIWDV6SHpQc3haTlBOWWp4cGJ6RE9paWRSck5VRUhyUGJnSHhsaElqeFFPRkRHNENKS3VFUzJxeDJFPScsXHJcbiAgICAgIGF1dGg6ICdkdW1teUF1dGhTZWNyZXQnXHJcbiAgICB9XHJcbiAgfTtcclxufVxyXG5cclxuLy8gU3Vic2NyaWJlIHRvIHB1c2ggbm90aWZpY2F0aW9uc1xyXG5hc3luYyBmdW5jdGlvbiBzdWJzY3JpYmUoKSB7XHJcbiAgY29uc29sZS5sb2coJ1N1YnNjcmliZSBmdW5jdGlvbiBjYWxsZWQnKTtcclxuICBcclxuICAvLyBDZWsgZHVrdW5nYW4gbm90aWZpa2FzaVxyXG4gIGlmICghKCdOb3RpZmljYXRpb24nIGluIHdpbmRvdykpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Jyb3dzZXIgdGlkYWsgbWVuZHVrdW5nIG5vdGlmaWthc2knKTtcclxuICAgIGFsZXJ0KCdCcm93c2VyIHRpZGFrIG1lbmR1a3VuZyBub3RpZmlrYXNpLicpO1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgLy8gQ2VrIGR1a3VuZ2FuIHNlcnZpY2Ugd29ya2VyXHJcbiAgaWYgKCEoJ3NlcnZpY2VXb3JrZXInIGluIG5hdmlnYXRvcikpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Jyb3dzZXIgdGlkYWsgbWVuZHVrdW5nIFNlcnZpY2UgV29ya2VyJyk7XHJcbiAgICBhbGVydCgnU2VydmljZSBXb3JrZXIgdGlkYWsgZGlkdWt1bmcgYnJvd3NlciBpbmkuJyk7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG5cclxuICAvLyBDZWsgaXppbiBub3RpZmlrYXNpXHJcbiAgaWYgKE5vdGlmaWNhdGlvbi5wZXJtaXNzaW9uID09PSAnZGVuaWVkJykge1xyXG4gICAgY29uc29sZS5lcnJvcignSXppbiBub3RpZmlrYXNpIGRpdG9sYWsnKTtcclxuICAgIGFsZXJ0KCdJemluIG5vdGlmaWthc2kgZGl0b2xhay4gU2lsYWthbiB1YmFoIHBlbmdhdHVyYW4gYnJvd3NlciBBbmRhLicpO1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIC8vIE1pbnRhIGl6aW4gbm90aWZpa2FzaSBqaWthIGJlbHVtIGRpYXR1clxyXG4gICAgaWYgKE5vdGlmaWNhdGlvbi5wZXJtaXNzaW9uICE9PSAnZ3JhbnRlZCcpIHtcclxuICAgICAgY29uc29sZS5sb2coJ1JlcXVlc3Rpbmcgbm90aWZpY2F0aW9uIHBlcm1pc3Npb24uLi4nKTtcclxuICAgICAgY29uc3QgcGVybWlzc2lvbiA9IGF3YWl0IE5vdGlmaWNhdGlvbi5yZXF1ZXN0UGVybWlzc2lvbigpO1xyXG4gICAgICBpZiAocGVybWlzc2lvbiAhPT0gJ2dyYW50ZWQnKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignSXppbiBub3RpZmlrYXNpIHRpZGFrIGRpYmVyaWthbicpO1xyXG4gICAgICAgIGFsZXJ0KCdJemluIG5vdGlmaWthc2kgdGlkYWsgZGliZXJpa2FuLicpO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIERhZnRhcmthbiBzZXJ2aWNlIHdvcmtlciBqaWthIGJlbHVtXHJcbiAgICBjb25zb2xlLmxvZygnUmVnaXN0ZXJpbmcgc2VydmljZSB3b3JrZXIuLi4nKTtcclxuICAgIGxldCByZWdpc3RyYXRpb247XHJcbiAgICB0cnkge1xyXG4gICAgICByZWdpc3RyYXRpb24gPSBhd2FpdCByZWdpc3RlclNlcnZpY2VXb3JrZXIoKTtcclxuICAgICAgY29uc29sZS5sb2coJ1NlcnZpY2Ugd29ya2VyIGlzIHJlYWR5OicsIHJlZ2lzdHJhdGlvbik7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciByZWdpc3RlcmluZyBzZXJ2aWNlIHdvcmtlcjonLCBlcnJvcik7XHJcbiAgICAgIC8vIEppa2EgZ2FnYWwgbWVuZGFmdGFya2FuIHNlcnZpY2Ugd29ya2VyLCBndW5ha2FuIHNpbXVsYXNpIHVudHVrIGRlbW9cclxuICAgICAgYWxlcnQoJ0dhZ2FsIG1lbmRhZnRhcmthbiBzZXJ2aWNlIHdvcmtlciwgbWVuZ2d1bmFrYW4gbW9kZSBzaW11bGFzaS4nKTtcclxuICAgICAgXHJcbiAgICAgIC8vIFNpbXBhbiBzdGF0dXMgbGFuZ2dhbmFuIGRpIGxvY2FsU3RvcmFnZSB1bnR1ayBzaW11bGFzaVxyXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncHVzaFN1YnNjcmliZWQnLCAndHJ1ZScpO1xyXG4gICAgICBcclxuICAgICAgLy8gS2lyaW0gZGF0YSBrZSBzZXJ2ZXIgKHNpbXVsYXNpKVxyXG4gICAgICBjb25zdCB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpO1xyXG4gICAgICBpZiAoIXRva2VuKSB7XHJcbiAgICAgICAgYWxlcnQoJ0FuZGEgaGFydXMgbG9naW4gdGVybGViaWggZGFodWx1LicpO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8gR3VuYWthbiBzdWJzY3JpcHRpb24gZHVtbXlcclxuICAgICAgY29uc3QgZHVtbXlTdWJzY3JpcHRpb24gPSBjcmVhdGVEdW1teVN1YnNjcmlwdGlvbigpO1xyXG4gICAgICBhd2FpdCBzdWJzY3JpYmVQdXNoTm90aWZpY2F0aW9uKHRva2VuLCBkdW1teVN1YnNjcmlwdGlvbik7XHJcbiAgICAgIFxyXG4gICAgICBhbGVydCgnQmVyaGFzaWwgYmVybGFuZ2dhbmFuIG5vdGlmaWthc2khIChNb2RlIFNpbXVsYXNpKScpO1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gQ2VrIFZBUElEX1BVQkxJQ19LRVlcclxuICAgIGNvbnNvbGUubG9nKCdDaGVja2luZyBWQVBJRF9QVUJMSUNfS0VZOicsIFZBUElEX1BVQkxJQ19LRVkpO1xyXG4gICAgaWYgKCFWQVBJRF9QVUJMSUNfS0VZKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1ZBUElEX1BVQkxJQ19LRVkgdGlkYWsgdGVyc2VkaWEnKTtcclxuICAgICAgYWxlcnQoJ0tvbmZpZ3VyYXNpIFZBUElEIGtleSB0aWRhayB0ZXJzZWRpYS4nKTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEtvbnZlcnNpIFZBUElEIGtleVxyXG4gICAgY29uc29sZS5sb2coJ0NvbnZlcnRpbmcgVkFQSUQga2V5IHRvIFVpbnQ4QXJyYXkuLi4nKTtcclxuICAgIGNvbnN0IGFwcGxpY2F0aW9uU2VydmVyS2V5ID0gdXJsQmFzZTY0VG9VaW50OEFycmF5KFZBUElEX1BVQkxJQ19LRVkpO1xyXG4gICAgXHJcbiAgICAvLyBDb2JhIHN1YnNjcmliZSBkZW5nYW4gcGVuZGVrYXRhbiBzZWRlcmhhbmFcclxuICAgIGNvbnNvbGUubG9nKCdTdWJzY3JpYmluZyB0byBwdXNoIHNlcnZpY2UuLi4nKTtcclxuICAgIGxldCBzdWJzY3JpcHRpb247XHJcbiAgICB0cnkge1xyXG4gICAgICBzdWJzY3JpcHRpb24gPSBhd2FpdCByZWdpc3RyYXRpb24ucHVzaE1hbmFnZXIuc3Vic2NyaWJlKHtcclxuICAgICAgICB1c2VyVmlzaWJsZU9ubHk6IHRydWUsXHJcbiAgICAgICAgYXBwbGljYXRpb25TZXJ2ZXJLZXk6IGFwcGxpY2F0aW9uU2VydmVyS2V5XHJcbiAgICAgIH0pO1xyXG4gICAgICBjb25zb2xlLmxvZygnU3VjY2Vzc2Z1bGx5IHN1YnNjcmliZWQgdG8gcHVzaCBzZXJ2aWNlOicsIHN1YnNjcmlwdGlvbik7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzdWJzY3JpYmluZyB0byBwdXNoIHNlcnZpY2U6JywgZXJyb3IpO1xyXG4gICAgICBcclxuICAgICAgaWYgKGVycm9yLm5hbWUgPT09ICdOb3RBbGxvd2VkRXJyb3InKSB7XHJcbiAgICAgICAgYWxlcnQoJ0l6aW4gbm90aWZpa2FzaSBkaXRvbGFrIG9sZWggYnJvd3Nlci4gUGVyaWtzYSBwZW5nYXR1cmFuIGl6aW4gYnJvd3NlciBBbmRhLicpO1xyXG4gICAgICB9IGVsc2UgaWYgKGVycm9yLm1lc3NhZ2UgJiYgZXJyb3IubWVzc2FnZS5pbmNsdWRlcygncHVzaCBzZXJ2aWNlJykpIHtcclxuICAgICAgICAvLyBKaWthIGdhZ2FsIGthcmVuYSBwdXNoIHNlcnZpY2UgZXJyb3IsIGd1bmFrYW4gc2ltdWxhc2lcclxuICAgICAgICBhbGVydCgnTGF5YW5hbiBwdXNoIHRpZGFrIHRlcnNlZGlhLCBtZW5nZ3VuYWthbiBtb2RlIHNpbXVsYXNpLicpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFNpbXBhbiBzdGF0dXMgbGFuZ2dhbmFuIGRpIGxvY2FsU3RvcmFnZSB1bnR1ayBzaW11bGFzaVxyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwdXNoU3Vic2NyaWJlZCcsICd0cnVlJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gS2lyaW0gZGF0YSBrZSBzZXJ2ZXIgKHNpbXVsYXNpKVxyXG4gICAgICAgIGNvbnN0IHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJyk7XHJcbiAgICAgICAgaWYgKCF0b2tlbikge1xyXG4gICAgICAgICAgYWxlcnQoJ0FuZGEgaGFydXMgbG9naW4gdGVybGViaWggZGFodWx1LicpO1xyXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBHdW5ha2FuIHN1YnNjcmlwdGlvbiBkdW1teVxyXG4gICAgICAgIGNvbnN0IGR1bW15U3Vic2NyaXB0aW9uID0gY3JlYXRlRHVtbXlTdWJzY3JpcHRpb24oKTtcclxuICAgICAgICBhd2FpdCBzdWJzY3JpYmVQdXNoTm90aWZpY2F0aW9uKHRva2VuLCBkdW1teVN1YnNjcmlwdGlvbik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgYWxlcnQoJ0Jlcmhhc2lsIGJlcmxhbmdnYW5hbiBub3RpZmlrYXNpISAoTW9kZSBTaW11bGFzaSknKTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBhbGVydChgR2FnYWwgYmVybGFuZ2dhbmFuOiAke2Vycm9yLm1lc3NhZ2V9YCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghc3Vic2NyaXB0aW9uKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBnZXQgc3Vic2NyaXB0aW9uIG9iamVjdCcpO1xyXG4gICAgICBhbGVydCgnR2FnYWwgbWVuZGFwYXRrYW4gc3Vic2NyaXB0aW9uLiBDb2JhIGxhZ2kgbmFudGkuJyk7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBLaXJpbSBkYXRhIGtlIHNlcnZlclxyXG4gICAgY29uc3QgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKTtcclxuICAgIGNvbnNvbGUubG9nKCdUb2tlbiBhdmFpbGFibGU6JywgISF0b2tlbik7XHJcbiAgICBcclxuICAgIGlmICghdG9rZW4pIHtcclxuICAgICAgY29uc29sZS5lcnJvcignVG9rZW4gdGlkYWsgdGVyc2VkaWEnKTtcclxuICAgICAgYWxlcnQoJ0FuZGEgaGFydXMgbG9naW4gdGVybGViaWggZGFodWx1LicpO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gS2lyaW0gc3Vic2NyaXB0aW9uIGtlIHNlcnZlclxyXG4gICAgY29uc29sZS5sb2coJ1NlbmRpbmcgc3Vic2NyaXB0aW9uIHRvIHNlcnZlci4uLicpO1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzdWJzY3JpYmVQdXNoTm90aWZpY2F0aW9uKHRva2VuLCBzdWJzY3JpcHRpb24pO1xyXG4gICAgY29uc29sZS5sb2coJ1NlcnZlciByZXNwb25zZTonLCByZXNwb25zZSk7XHJcbiAgICBcclxuICAgIGlmIChyZXNwb25zZS5lcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdTZXJ2ZXIgZXJyb3I6JywgcmVzcG9uc2UubWVzc2FnZSk7XHJcbiAgICAgIGFsZXJ0KGBTZXJ2ZXIgZXJyb3I6ICR7cmVzcG9uc2UubWVzc2FnZX1gKTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnNvbGUubG9nKCdTdWNjZXNzZnVsbHkgc3Vic2NyaWJlZCB0byBwdXNoIG5vdGlmaWNhdGlvbnMnKTtcclxuICAgIGFsZXJ0KCdCZXJoYXNpbCBiZXJsYW5nZ2FuYW4gbm90aWZpa2FzaSEnKTtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzdWJzY3JpYmluZyB0byBwdXNoIG5vdGlmaWNhdGlvbnM6JywgZXJyb3IpO1xyXG4gICAgYWxlcnQoYEdhZ2FsIGJlcmxhbmdnYW5hbjogJHtlcnJvci5tZXNzYWdlfWApO1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxufVxyXG5cclxuLy8gVW5zdWJzY3JpYmUgZnJvbSBwdXNoIG5vdGlmaWNhdGlvbnNcclxuYXN5bmMgZnVuY3Rpb24gdW5zdWJzY3JpYmUoKSB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIEppa2EgbWVuZ2d1bmFrYW4gbW9kZSBzaW11bGFzaSwgaGFwdXMgc3RhdHVzIGRhcmkgbG9jYWxTdG9yYWdlXHJcbiAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3B1c2hTdWJzY3JpYmVkJykgPT09ICd0cnVlJykge1xyXG4gICAgICAvLyBLaXJpbSBwZXJtaW50YWFuIHVuc3Vic2NyaWJlIGtlIHNlcnZlciB1bnR1ayBtb2RlIHNpbXVsYXNpIGp1Z2FcclxuICAgICAgY29uc3QgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKTtcclxuICAgICAgaWYgKCF0b2tlbikge1xyXG4gICAgICAgIGFsZXJ0KCdBbmRhIGhhcnVzIGxvZ2luIHRlcmxlYmloIGRhaHVsdS4nKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIEd1bmFrYW4gZW5kcG9pbnQgZHVtbXkgeWFuZyBkaXNpbXBhbiBzYWF0IHN1YnNjcmliZVxyXG4gICAgICBjb25zdCBkdW1teUVuZHBvaW50ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2R1bW15RW5kcG9pbnQnKSB8fCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdodHRwczovL2ZjbS5nb29nbGVhcGlzLmNvbS9mY20vc2VuZC9kdW1teS1lbmRwb2ludC1zaW11bGF0aW9uJztcclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKCdNZW5naXJpbSBwZXJtaW50YWFuIHVuc3Vic2NyaWJlIChtb2RlIHNpbXVsYXNpKTonLCBkdW1teUVuZHBvaW50KTtcclxuICAgICAgLy8gS2lyaW0gcGVybWludGFhbiB1bnN1YnNjcmliZSBrZSBzZXJ2ZXJcclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB1bnN1YnNjcmliZVB1c2hOb3RpZmljYXRpb24odG9rZW4sIGR1bW15RW5kcG9pbnQpO1xyXG4gICAgICBjb25zb2xlLmxvZygnU2VydmVyIHJlc3BvbnNlIHVudHVrIHVuc3Vic2NyaWJlIChzaW11bGFzaSk6JywgcmVzcG9uc2UpO1xyXG4gICAgICBcclxuICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3B1c2hTdWJzY3JpYmVkJyk7XHJcbiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdkdW1teUVuZHBvaW50Jyk7XHJcbiAgICAgIGFsZXJ0KCdCZXJoYXNpbCBiZXJoZW50aSBiZXJsYW5nZ2FuYW4gbm90aWZpa2FzaSEgKE1vZGUgU2ltdWxhc2kpJyk7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAoISgnc2VydmljZVdvcmtlcicgaW4gbmF2aWdhdG9yKSkge1xyXG4gICAgICBhbGVydCgnU2VydmljZSBXb3JrZXIgdGlkYWsgZGlkdWt1bmcgYnJvd3NlciBpbmkuJyk7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCByZWdpc3RyYXRpb24gPSBhd2FpdCBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5nZXRSZWdpc3RyYXRpb24oKTtcclxuICAgIGlmICghcmVnaXN0cmF0aW9uKSB7XHJcbiAgICAgIGFsZXJ0KCdTZXJ2aWNlIHdvcmtlciBiZWx1bSB0ZXJkYWZ0YXIuJyk7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3Qgc3Vic2NyaXB0aW9uID0gYXdhaXQgcmVnaXN0cmF0aW9uLnB1c2hNYW5hZ2VyLmdldFN1YnNjcmlwdGlvbigpO1xyXG4gICAgaWYgKCFzdWJzY3JpcHRpb24pIHtcclxuICAgICAgYWxlcnQoJ0FuZGEgYmVsdW0gYmVybGFuZ2dhbmFuIG5vdGlmaWthc2kuJyk7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBTaW1wYW4gZW5kcG9pbnQgc2ViZWx1bSB1bnN1YnNjcmliZVxyXG4gICAgY29uc3QgZW5kcG9pbnQgPSBzdWJzY3JpcHRpb24uZW5kcG9pbnQ7XHJcbiAgICBjb25zb2xlLmxvZygnRW5kcG9pbnQgeWFuZyBha2FuIGRpaGFwdXM6JywgZW5kcG9pbnQpO1xyXG4gICAgXHJcbiAgICAvLyBVbnN1YnNjcmliZSBkYXJpIHB1c2ggbWFuYWdlclxyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICBpZiAoIXJlc3VsdCkge1xyXG4gICAgICBhbGVydCgnR2FnYWwgYmVyaGVudGkgYmVybGFuZ2dhbmFuLicpO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnNvbGUubG9nKCdCZXJoYXNpbCB1bnN1YnNjcmliZSBkYXJpIHB1c2ggbWFuYWdlcicpO1xyXG4gICAgXHJcbiAgICAvLyBLaXJpbSBkYXRhIGtlIHNlcnZlciB1bnR1ayB1bnN1YnNjcmliZVxyXG4gICAgY29uc3QgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKTtcclxuICAgIGlmICghdG9rZW4pIHtcclxuICAgICAgYWxlcnQoJ0FuZGEgaGFydXMgbG9naW4gdGVybGViaWggZGFodWx1LicpO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnNvbGUubG9nKCdNZW5naXJpbSBwZXJtaW50YWFuIHVuc3Vic2NyaWJlIGtlIHNlcnZlciBkZW5nYW4gZW5kcG9pbnQ6JywgZW5kcG9pbnQpO1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB1bnN1YnNjcmliZVB1c2hOb3RpZmljYXRpb24odG9rZW4sIGVuZHBvaW50KTtcclxuICAgIGNvbnNvbGUubG9nKCdTZXJ2ZXIgcmVzcG9uc2UgdW50dWsgdW5zdWJzY3JpYmU6JywgcmVzcG9uc2UpO1xyXG4gICAgXHJcbiAgICBhbGVydCgnQmVyaGFzaWwgYmVyaGVudGkgYmVybGFuZ2dhbmFuIG5vdGlmaWthc2khJyk7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignR2FnYWwgdW5zdWJzY3JpYmU6JywgZXJyb3IpO1xyXG4gICAgYWxlcnQoYEdhZ2FsIGJlcmhlbnRpIGJlcmxhbmdnYW5hbjogJHtlcnJvci5tZXNzYWdlfWApO1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxufVxyXG5cclxuLy8gRnVuZ3NpIHVudHVrIG1lbXBlcmJhcnVpIHRla3MgdG9tYm9sIGJlcmRhc2Fya2FuIHN0YXR1cyBsYW5nZ2FuYW5cclxuYXN5bmMgZnVuY3Rpb24gdXBkYXRlU3Vic2NyaXB0aW9uQnV0dG9uVGV4dChidXR0b24pIHtcclxuICBidXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gIFxyXG4gIHRyeSB7XHJcbiAgICAvLyBDZWsgbW9kZSBzaW11bGFzaSB0ZXJsZWJpaCBkYWh1bHVcclxuICAgIGNvbnN0IGlzU2ltdWxhdGlvbk1vZGUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncHVzaFN1YnNjcmliZWQnKSA9PT0gJ3RydWUnO1xyXG4gICAgXHJcbiAgICAvLyBKaWthIG1vZGUgc2ltdWxhc2kgYWt0aWYsIGd1bmFrYW4gc3RhdHVzIGRhcmkgbG9jYWxTdG9yYWdlXHJcbiAgICBpZiAoaXNTaW11bGF0aW9uTW9kZSkge1xyXG4gICAgICBidXR0b24udGV4dENvbnRlbnQgPSAnVW5zdWJzY3JpYmUgUHVzaCBOb3RpZmljYXRpb24nO1xyXG4gICAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnc3Vic2NyaWJlJyk7XHJcbiAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCd1bnN1YnNjcmliZScpO1xyXG4gICAgICBidXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBKaWthIGJ1a2FuIG1vZGUgc2ltdWxhc2ksIGNlayBzdGF0dXMgbGFuZ2dhbmFuIHNlYmVuYXJueWFcclxuICAgIGNvbnN0IGlzU3Vic2NyaWJlZCA9IGF3YWl0IGlzQ3VycmVudFB1c2hTdWJzY3JpcHRpb25BdmFpbGFibGUoKTtcclxuICAgIFxyXG4gICAgaWYgKGlzU3Vic2NyaWJlZCkge1xyXG4gICAgICBidXR0b24udGV4dENvbnRlbnQgPSAnVW5zdWJzY3JpYmUgUHVzaCBOb3RpZmljYXRpb24nO1xyXG4gICAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnc3Vic2NyaWJlJyk7XHJcbiAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCd1bnN1YnNjcmliZScpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gJ1N1YnNjcmliZSBQdXNoIE5vdGlmaWNhdGlvbic7XHJcbiAgICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCd1bnN1YnNjcmliZScpO1xyXG4gICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnc3Vic2NyaWJlJyk7XHJcbiAgICB9XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNoZWNraW5nIHN1YnNjcmlwdGlvbiBzdGF0dXM6JywgZXJyb3IpO1xyXG4gICAgYnV0dG9uLnRleHRDb250ZW50ID0gJ1B1c2ggTm90aWZpY2F0aW9uIEVycm9yJztcclxuICB9IGZpbmFsbHkge1xyXG4gICAgYnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBGdW5nc2kgdW50dWsgdG9nZ2xlIHB1c2ggbm90aWZpY2F0aW9uXHJcbmFzeW5jIGZ1bmN0aW9uIHRvZ2dsZVB1c2hOb3RpZmljYXRpb24oYnV0dG9uKSB7XHJcbiAgYnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICBidXR0b24udGV4dENvbnRlbnQgPSAnTWVtcHJvc2VzLi4uJztcclxuICBcclxuICB0cnkge1xyXG4gICAgLy8gQ2VrIG1vZGUgc2ltdWxhc2kgdGVybGViaWggZGFodWx1XHJcbiAgICBjb25zdCBpc1NpbXVsYXRpb25Nb2RlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3B1c2hTdWJzY3JpYmVkJykgPT09ICd0cnVlJztcclxuICAgIFxyXG4gICAgLy8gSmlrYSBtb2RlIHNpbXVsYXNpIGFrdGlmLCBndW5ha2FuIHN0YXR1cyBkYXJpIGxvY2FsU3RvcmFnZVxyXG4gICAgaWYgKGlzU2ltdWxhdGlvbk1vZGUpIHtcclxuICAgICAgYXdhaXQgdW5zdWJzY3JpYmUoKTtcclxuICAgICAgY29uc29sZS5sb2coJ1Vuc3Vic2NyaWJlZCBmcm9tIHB1c2ggbm90aWZpY2F0aW9uIChzaW11bGF0aW9uIG1vZGUpJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBKaWthIGJ1a2FuIG1vZGUgc2ltdWxhc2ksIGNlayBzdGF0dXMgbGFuZ2dhbmFuIHNlYmVuYXJueWFcclxuICAgICAgY29uc3QgaXNTdWJzY3JpYmVkID0gYXdhaXQgaXNDdXJyZW50UHVzaFN1YnNjcmlwdGlvbkF2YWlsYWJsZSgpO1xyXG4gICAgICBcclxuICAgICAgaWYgKGlzU3Vic2NyaWJlZCkge1xyXG4gICAgICAgIGF3YWl0IHVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1Vuc3Vic2NyaWJlZCBmcm9tIHB1c2ggbm90aWZpY2F0aW9uJyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYXdhaXQgc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1N1YnNjcmliZWQgdG8gcHVzaCBub3RpZmljYXRpb24nKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBVcGRhdGUgdGVrcyB0b21ib2wgc2V0ZWxhaCB0b2dnbGVcclxuICAgIGF3YWl0IHVwZGF0ZVN1YnNjcmlwdGlvbkJ1dHRvblRleHQoYnV0dG9uKTtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciB0b2dnbGluZyBwdXNoIG5vdGlmaWNhdGlvbjonLCBlcnJvcik7XHJcbiAgICBidXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufVxyXG5cclxuLy8gRWtzcG9yIHNlbXVhIGZ1bmdzaSB5YW5nIGRpYnV0dWhrYW5cclxuZXhwb3J0IHtcclxuICB1cmxCYXNlNjRUb1VpbnQ4QXJyYXksXHJcbiAgaXNDdXJyZW50UHVzaFN1YnNjcmlwdGlvbkF2YWlsYWJsZSxcclxuICBzdWJzY3JpYmUsXHJcbiAgdW5zdWJzY3JpYmUsXHJcbiAgdG9nZ2xlUHVzaE5vdGlmaWNhdGlvbixcclxuICB1cGRhdGVTdWJzY3JpcHRpb25CdXR0b25UZXh0XHJcbn07XHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/utils/notification-helper.js\n");

/***/ })

}]);