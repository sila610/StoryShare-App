"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkceritaapp"] = self["webpackChunkceritaapp"] || []).push([["src_presenter_addStoryPresenter_js"],{

/***/ "./src/presenter/addStoryPresenter.js":
/*!********************************************!*\
  !*** ./src/presenter/addStoryPresenter.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ AddStoryPresenter)\n/* harmony export */ });\n/* harmony import */ var _views_addStoryView_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../views/addStoryView.js */ \"./src/views/addStoryView.js\");\n/* harmony import */ var _model_storyModel_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../model/storyModel.js */ \"./src/model/storyModel.js\");\n\r\n\r\n\r\n\r\nclass AddStoryPresenter {\r\n  #view;\r\n\r\n  constructor(container) {\r\n    if (!container) throw new Error('Container element is required');\r\n    this.#view = new _views_addStoryView_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"](container);\r\n    this.#view.onSubmit = this.handleSubmit.bind(this);\r\n    this.#view.onCancel = this.handleCancel.bind(this);\r\n  }\r\n\r\n  async init() {\r\n    this.#view.render();\r\n    // Selalu minta izin kamera setiap kali halaman dibuka\r\n    console.log('AddStoryPresenter init - requesting camera permission');\r\n    \r\n    // Tambahkan timeout kecil untuk memastikan DOM sudah siap\r\n    setTimeout(() => {\r\n      // Tampilkan dialog konfirmasi terlebih dahulu\r\n      if (confirm('Aplikasi membutuhkan akses kamera untuk mengambil foto. Izinkan akses kamera?')) {\r\n        // Jika user setuju, baru setup kamera\r\n        this.#view.setupCamera();\r\n      }\r\n    }, 500);\r\n  }\r\n\r\n  stopCamera() {\r\n    if (this.#view && typeof this.#view.stopCamera === 'function') {\r\n      console.log('AddStoryPresenter - stopping camera');\r\n      this.#view.stopCamera();\r\n    }\r\n  }\r\n\r\n  async handleSubmit(description, photoFile, location) {\r\n    const token = _model_storyModel_js__WEBPACK_IMPORTED_MODULE_1__.getToken();\r\n    if (!token) {\r\n      alert('Anda harus login terlebih dahulu.');\r\n      return;\r\n    }\r\n    try {\r\n      const res = await _model_storyModel_js__WEBPACK_IMPORTED_MODULE_1__.postStory(token, description, photoFile, location.lat, location.lon);\r\n      if (!res.error) {\r\n        alert('Cerita berhasil ditambahkan');\r\n        \r\n        // Tambahkan cerita baru ke IndexedDB agar muncul di beranda\r\n        if (res.story) {\r\n          // Tambahkan properti yang diperlukan\r\n          const newStory = {\r\n            id: res.story.id,\r\n            name: localStorage.getItem('userName') || 'Anda',\r\n            description: description,\r\n            photoUrl: URL.createObjectURL(photoFile),\r\n            createdAt: new Date().toISOString(),\r\n            lat: location.lat,\r\n            lon: location.lon\r\n          };\r\n          \r\n          // Simpan ke IndexedDB\r\n          const { saveStoryToDB } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../utils/database.js */ \"./src/utils/database.js\"));\r\n          await saveStoryToDB(newStory);\r\n        }\r\n        \r\n        // Matikan kamera sebelum navigasi\r\n        this.stopCamera();\r\n        \r\n        // Navigasi ke halaman stories\r\n        const { navigateTo } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../routes/router.js */ \"./src/routes/router.js\"));\r\n        await navigateTo('#stories');\r\n      } else {\r\n        alert('Gagal menambahkan cerita: ' + res.message);\r\n      }\r\n    } catch (error) {\r\n      alert('Terjadi kesalahan jaringan.');\r\n      console.error(error);\r\n    }\r\n  }\r\n\r\n  async handleCancel() {\r\n    // Matikan kamera sebelum navigasi\r\n    this.stopCamera();\r\n    \r\n    const { navigateTo } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../routes/router.js */ \"./src/routes/router.js\"));\r\n    await navigateTo('#stories');\r\n  }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcHJlc2VudGVyL2FkZFN0b3J5UHJlc2VudGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFvRDtBQUNKO0FBQ2hEO0FBQ0E7QUFDZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLDhEQUFZO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLDBEQUFjO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsMkRBQWU7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixnQkFBZ0IsUUFBUSwySUFBOEI7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsYUFBYSxRQUFRLHlJQUE2QjtBQUNsRTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksYUFBYSxRQUFRLHlJQUE2QjtBQUM5RDtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jZXJpdGFhcHAvLi9zcmMvcHJlc2VudGVyL2FkZFN0b3J5UHJlc2VudGVyLmpzPzIzZjIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEFkZFN0b3J5VmlldyBmcm9tICcuLi92aWV3cy9hZGRTdG9yeVZpZXcuanMnO1xyXG5pbXBvcnQgKiBhcyBtb2RlbCBmcm9tICcuLi9tb2RlbC9zdG9yeU1vZGVsLmpzJztcclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBZGRTdG9yeVByZXNlbnRlciB7XHJcbiAgI3ZpZXc7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGNvbnRhaW5lcikge1xyXG4gICAgaWYgKCFjb250YWluZXIpIHRocm93IG5ldyBFcnJvcignQ29udGFpbmVyIGVsZW1lbnQgaXMgcmVxdWlyZWQnKTtcclxuICAgIHRoaXMuI3ZpZXcgPSBuZXcgQWRkU3RvcnlWaWV3KGNvbnRhaW5lcik7XHJcbiAgICB0aGlzLiN2aWV3Lm9uU3VibWl0ID0gdGhpcy5oYW5kbGVTdWJtaXQuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuI3ZpZXcub25DYW5jZWwgPSB0aGlzLmhhbmRsZUNhbmNlbC5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgaW5pdCgpIHtcclxuICAgIHRoaXMuI3ZpZXcucmVuZGVyKCk7XHJcbiAgICAvLyBTZWxhbHUgbWludGEgaXppbiBrYW1lcmEgc2V0aWFwIGthbGkgaGFsYW1hbiBkaWJ1a2FcclxuICAgIGNvbnNvbGUubG9nKCdBZGRTdG9yeVByZXNlbnRlciBpbml0IC0gcmVxdWVzdGluZyBjYW1lcmEgcGVybWlzc2lvbicpO1xyXG4gICAgXHJcbiAgICAvLyBUYW1iYWhrYW4gdGltZW91dCBrZWNpbCB1bnR1ayBtZW1hc3Rpa2FuIERPTSBzdWRhaCBzaWFwXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgLy8gVGFtcGlsa2FuIGRpYWxvZyBrb25maXJtYXNpIHRlcmxlYmloIGRhaHVsdVxyXG4gICAgICBpZiAoY29uZmlybSgnQXBsaWthc2kgbWVtYnV0dWhrYW4gYWtzZXMga2FtZXJhIHVudHVrIG1lbmdhbWJpbCBmb3RvLiBJemlua2FuIGFrc2VzIGthbWVyYT8nKSkge1xyXG4gICAgICAgIC8vIEppa2EgdXNlciBzZXR1anUsIGJhcnUgc2V0dXAga2FtZXJhXHJcbiAgICAgICAgdGhpcy4jdmlldy5zZXR1cENhbWVyYSgpO1xyXG4gICAgICB9XHJcbiAgICB9LCA1MDApO1xyXG4gIH1cclxuXHJcbiAgc3RvcENhbWVyYSgpIHtcclxuICAgIGlmICh0aGlzLiN2aWV3ICYmIHR5cGVvZiB0aGlzLiN2aWV3LnN0b3BDYW1lcmEgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgY29uc29sZS5sb2coJ0FkZFN0b3J5UHJlc2VudGVyIC0gc3RvcHBpbmcgY2FtZXJhJyk7XHJcbiAgICAgIHRoaXMuI3ZpZXcuc3RvcENhbWVyYSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgaGFuZGxlU3VibWl0KGRlc2NyaXB0aW9uLCBwaG90b0ZpbGUsIGxvY2F0aW9uKSB7XHJcbiAgICBjb25zdCB0b2tlbiA9IG1vZGVsLmdldFRva2VuKCk7XHJcbiAgICBpZiAoIXRva2VuKSB7XHJcbiAgICAgIGFsZXJ0KCdBbmRhIGhhcnVzIGxvZ2luIHRlcmxlYmloIGRhaHVsdS4nKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcmVzID0gYXdhaXQgbW9kZWwucG9zdFN0b3J5KHRva2VuLCBkZXNjcmlwdGlvbiwgcGhvdG9GaWxlLCBsb2NhdGlvbi5sYXQsIGxvY2F0aW9uLmxvbik7XHJcbiAgICAgIGlmICghcmVzLmVycm9yKSB7XHJcbiAgICAgICAgYWxlcnQoJ0Nlcml0YSBiZXJoYXNpbCBkaXRhbWJhaGthbicpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFRhbWJhaGthbiBjZXJpdGEgYmFydSBrZSBJbmRleGVkREIgYWdhciBtdW5jdWwgZGkgYmVyYW5kYVxyXG4gICAgICAgIGlmIChyZXMuc3RvcnkpIHtcclxuICAgICAgICAgIC8vIFRhbWJhaGthbiBwcm9wZXJ0aSB5YW5nIGRpcGVybHVrYW5cclxuICAgICAgICAgIGNvbnN0IG5ld1N0b3J5ID0ge1xyXG4gICAgICAgICAgICBpZDogcmVzLnN0b3J5LmlkLFxyXG4gICAgICAgICAgICBuYW1lOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlck5hbWUnKSB8fCAnQW5kYScsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgcGhvdG9Vcmw6IFVSTC5jcmVhdGVPYmplY3RVUkwocGhvdG9GaWxlKSxcclxuICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgIGxhdDogbG9jYXRpb24ubGF0LFxyXG4gICAgICAgICAgICBsb246IGxvY2F0aW9uLmxvblxyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gU2ltcGFuIGtlIEluZGV4ZWREQlxyXG4gICAgICAgICAgY29uc3QgeyBzYXZlU3RvcnlUb0RCIH0gPSBhd2FpdCBpbXBvcnQoJy4uL3V0aWxzL2RhdGFiYXNlLmpzJyk7XHJcbiAgICAgICAgICBhd2FpdCBzYXZlU3RvcnlUb0RCKG5ld1N0b3J5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gTWF0aWthbiBrYW1lcmEgc2ViZWx1bSBuYXZpZ2FzaVxyXG4gICAgICAgIHRoaXMuc3RvcENhbWVyYSgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIE5hdmlnYXNpIGtlIGhhbGFtYW4gc3Rvcmllc1xyXG4gICAgICAgIGNvbnN0IHsgbmF2aWdhdGVUbyB9ID0gYXdhaXQgaW1wb3J0KCcuLi9yb3V0ZXMvcm91dGVyLmpzJyk7XHJcbiAgICAgICAgYXdhaXQgbmF2aWdhdGVUbygnI3N0b3JpZXMnKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBhbGVydCgnR2FnYWwgbWVuYW1iYWhrYW4gY2VyaXRhOiAnICsgcmVzLm1lc3NhZ2UpO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBhbGVydCgnVGVyamFkaSBrZXNhbGFoYW4gamFyaW5nYW4uJyk7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgaGFuZGxlQ2FuY2VsKCkge1xyXG4gICAgLy8gTWF0aWthbiBrYW1lcmEgc2ViZWx1bSBuYXZpZ2FzaVxyXG4gICAgdGhpcy5zdG9wQ2FtZXJhKCk7XHJcbiAgICBcclxuICAgIGNvbnN0IHsgbmF2aWdhdGVUbyB9ID0gYXdhaXQgaW1wb3J0KCcuLi9yb3V0ZXMvcm91dGVyLmpzJyk7XHJcbiAgICBhd2FpdCBuYXZpZ2F0ZVRvKCcjc3RvcmllcycpO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/presenter/addStoryPresenter.js\n");

/***/ }),

/***/ "./src/views/addStoryView.js":
/*!***********************************!*\
  !*** ./src/views/addStoryView.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ AddStoryView)\n/* harmony export */ });\n/* harmony import */ var leaflet__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! leaflet */ \"./node_modules/leaflet/dist/leaflet-src.js\");\n/* harmony import */ var leaflet__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(leaflet__WEBPACK_IMPORTED_MODULE_0__);\n\r\n\r\nconst locationIcon = leaflet__WEBPACK_IMPORTED_MODULE_0___default().icon({\r\n  iconUrl: '/assets/place_24dp_5985E1.png', // Pastikan ikon sudah tersedia di public/assets\r\n  iconSize: [32, 32],\r\n  iconAnchor: [16, 32],\r\n  popupAnchor: [0, -32],\r\n});\r\n\r\nclass AddStoryView {\r\n  constructor(container) {\r\n    if (!container) throw new Error('Container element is required');\r\n    this.container = container;\r\n    this.takenPictures = [];\r\n    this.selectedLocation = { lat: null, lon: null };\r\n    this._stream = null;\r\n    this._map = null;\r\n    this._marker = null;\r\n\r\n    this.onSubmit = null;\r\n    this.onCancel = null;\r\n    this.onTakePhoto = null;\r\n    this.onUploadPhoto = null;\r\n    \r\n    // Pastikan kamera dimatikan saat navigasi berubah\r\n    window.addEventListener('hashchange', () => {\r\n      if (window.location.hash !== '#add-story') {\r\n        this.stopCamera();\r\n      }\r\n    });\r\n  }\r\n\r\n  render() {\r\n    this.container.innerHTML = `\r\n      <style>\r\n        .camera-permission-prompt {\r\n          background-color: #f0f8ff;\r\n          border: 1px solid #5985e1;\r\n          border-radius: 8px;\r\n          padding: 20px;\r\n          margin: 10px 0;\r\n          text-align: center;\r\n        }\r\n        .camera-permission-prompt p {\r\n          margin-bottom: 15px;\r\n          color: #333;\r\n        }\r\n      </style>\r\n      <h2 style=\"text-align:center; margin-bottom:20px;\">Tambah Cerita Baru</h2>\r\n      <form id=\"storyForm\" class=\"story-form\" novalidate>\r\n        <div class=\"form-control\">\r\n          <label for=\"title\">Judul Cerita:</label>\r\n          <input type=\"text\" id=\"title\" name=\"title\" placeholder=\"Masukkan judul cerita\" required />\r\n        </div>\r\n        <div class=\"form-control\">\r\n          <label for=\"desc\">Deskripsi Cerita:</label>\r\n          <textarea id=\"desc\" name=\"desc\" required placeholder=\"Tuliskan deskripsi cerita Anda...\"></textarea>\r\n        </div>\r\n        <div class=\"form-control\">\r\n          <label for=\"date\">Tanggal Cerita:</label>\r\n          <input type=\"date\" id=\"date\" name=\"date\" required value=\"${new Date().toISOString().split('T')[0]}\" />\r\n        </div>\r\n        <div class=\"form-control\">\r\n          <label>Ambil Gambar dengan Kamera:</label>\r\n          <video id=\"camera\" autoplay muted playsinline></video>\r\n          <canvas id=\"snapshot\" style=\"display:none;\"></canvas>\r\n          <button type=\"button\" id=\"capture\" class=\"btn btn-outline\">Ambil Foto</button>\r\n          <ul id=\"taken-pictures-list\" class=\"taken-pictures-list\"></ul>\r\n        </div>\r\n        <div class=\"form-control\">\r\n          <label>Atau Upload Gambar:</label>\r\n          <input type=\"file\" id=\"fileUpload\" accept=\"image/*\" multiple />\r\n        </div>\r\n        <div class=\"form-control\">\r\n          <label>Pilih Lokasi (klik pada peta):</label>\r\n          <div id=\"map\" style=\"height:300px;\"></div>\r\n          <div id=\"location-display\">\r\n            Lokasi dipilih: <span id=\"location-lat\">-</span>, <span id=\"location-lon\">-</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"form-buttons\">\r\n          <button class=\"btn\" type=\"submit\">Kirim Cerita</button>\r\n          <button type=\"button\" id=\"cancel-button\" class=\"btn btn-outline\">Batal</button>\r\n        </div>\r\n      </form>\r\n    `;\r\n\r\n    this.#bindEvents();\r\n    // Tidak memanggil setupCamera di sini lagi, karena akan dipanggil dari presenter\r\n    this.#setupMap();\r\n    \r\n    // Simpan instance ini ke window agar bisa diakses global untuk mematikan kamera\r\n    window.currentAddStoryView = this;\r\n  }\r\n\r\n  #bindEvents() {\r\n    const form = this.container.querySelector('#storyForm');\r\n    const captureBtn = this.container.querySelector('#capture');\r\n    const fileUpload = this.container.querySelector('#fileUpload');\r\n    const cancelBtn = this.container.querySelector('#cancel-button');\r\n    const video = this.container.querySelector('#camera');\r\n    const canvas = this.container.querySelector('#snapshot');\r\n\r\n    form.addEventListener('submit', e => {\r\n      e.preventDefault();\r\n\r\n      if (!form.checkValidity()) {\r\n        form.reportValidity();\r\n        return;\r\n      }\r\n\r\n      if (this.takenPictures.length === 0) {\r\n        alert('Anda harus menambahkan minimal satu gambar.');\r\n        return;\r\n      }\r\n\r\n      const photoFile = this.takenPictures[0];\r\n      if (photoFile.size > 1024 * 1024) {\r\n        alert('Ukuran gambar maksimal 1MB.');\r\n        return;\r\n      }\r\n\r\n      // Validasi lokasi\r\n      if (!this.selectedLocation.lat || !this.selectedLocation.lon) {\r\n        alert('Anda harus memilih lokasi pada peta.');\r\n        return;\r\n      }\r\n\r\n      if (this.onSubmit) {\r\n        const title = form.elements['title'].value.trim();\r\n        const description = form.elements['desc'].value.trim();\r\n        const date = form.elements['date'].value;\r\n\r\n        const fullDescription = `${title}\\n\\n${description}\\n\\nTanggal: ${date}`;\r\n\r\n        this.onSubmit(fullDescription, photoFile, this.selectedLocation);\r\n      }\r\n    });\r\n\r\n    cancelBtn.addEventListener('click', () => {\r\n      if (this.onCancel) this.onCancel();\r\n    });\r\n\r\n    captureBtn.addEventListener('click', () => {\r\n      if (!video.videoWidth || !video.videoHeight) {\r\n        alert('Video kamera belum siap.');\r\n        return;\r\n      }\r\n      const context = canvas.getContext('2d');\r\n      canvas.width = video.videoWidth;\r\n      canvas.height = video.videoHeight;\r\n      context.drawImage(video, 0, 0, canvas.width, canvas.height);\r\n      canvas.style.display = 'block';\r\n      video.style.display = 'none';\r\n\r\n      canvas.toBlob(blob => {\r\n        if (blob) {\r\n          this.addTakenPicture(blob);\r\n          if (this.onTakePhoto) this.onTakePhoto(blob);\r\n        }\r\n      }, 'image/jpeg', 0.8); // Kompres gambar untuk mengurangi ukuran\r\n    });\r\n\r\n    fileUpload.addEventListener('change', e => {\r\n      const files = Array.from(e.target.files);\r\n      files.forEach(file => {\r\n        if (file.type.startsWith('image/')) {\r\n          this.addTakenPicture(file);\r\n          if (this.onUploadPhoto) this.onUploadPhoto(file);\r\n        }\r\n      });\r\n      fileUpload.value = '';\r\n    });\r\n  }\r\n\r\n  setupCamera() {\r\n    const video = this.container.querySelector('#camera');\r\n\r\n    // Pastikan kamera sebelumnya dimatikan dulu\r\n    this.stopCamera();\r\n\r\n    console.log('Setting up camera...');\r\n    \r\n    // Minta izin kamera langsung\r\n    navigator.mediaDevices.getUserMedia({ video: true })\r\n      .then(stream => {\r\n        this._stream = stream;\r\n        video.srcObject = stream;\r\n        video.style.display = 'block';\r\n        const canvas = this.container.querySelector('#snapshot');\r\n        if (canvas) canvas.style.display = 'none';\r\n        console.log('Camera started successfully');\r\n      })\r\n      .catch(err => {\r\n        console.error('Tidak dapat mengakses kamera', err);\r\n        alert('Akses kamera ditolak atau tidak tersedia. Silakan izinkan akses kamera di pengaturan browser Anda.');\r\n      });\r\n  }\r\n\r\n  #setupMap() {\r\n    const defaultLatLng = [-2.5, 117.5];\r\n    this._map = leaflet__WEBPACK_IMPORTED_MODULE_0___default().map('map').setView(defaultLatLng, 5);\r\n\r\n    leaflet__WEBPACK_IMPORTED_MODULE_0___default().tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n      attribution: '© OpenStreetMap contributors',\r\n    }).addTo(this._map);\r\n\r\n    this._marker = null;\r\n\r\n    this._map.on('click', e => {\r\n      const { lat, lng } = e.latlng;\r\n      if (this._marker) {\r\n        this._marker.setLatLng(e.latlng);\r\n      } else {\r\n        this._marker = leaflet__WEBPACK_IMPORTED_MODULE_0___default().marker(e.latlng, { icon: locationIcon }).addTo(this._map);\r\n      }\r\n      this.updateLocation(lat, lng);\r\n    });\r\n  }\r\n\r\n  addTakenPicture(blob) {\r\n    this.takenPictures.push(blob);\r\n    this.#renderTakenPictures();\r\n  }\r\n\r\n  #renderTakenPictures() {\r\n    const list = this.container.querySelector('#taken-pictures-list');\r\n    list.innerHTML = '';\r\n    this.takenPictures.forEach((blob, i) => {\r\n      const li = document.createElement('li');\r\n      li.className = 'taken-pictures-list__item';\r\n\r\n      const img = document.createElement('img');\r\n      img.src = URL.createObjectURL(blob);\r\n      img.alt = `Foto dokumentasi ${i + 1}`;\r\n      img.width = 100;\r\n\r\n      const btnDelete = document.createElement('button');\r\n      btnDelete.type = 'button';\r\n      btnDelete.className = 'delete-picture-btn';\r\n      btnDelete.title = 'Hapus foto ini';\r\n      btnDelete.textContent = '×';\r\n\r\n      btnDelete.addEventListener('click', () => {\r\n        this.takenPictures.splice(i, 1);\r\n        this.#renderTakenPictures();\r\n      });\r\n\r\n      li.appendChild(img);\r\n      li.appendChild(btnDelete);\r\n      list.appendChild(li);\r\n    });\r\n  }\r\n\r\n  updateLocation(lat, lon) {\r\n    this.selectedLocation = { lat, lon };\r\n    this.container.querySelector('#location-lat').textContent = lat?.toFixed(6) || '-';\r\n    this.container.querySelector('#location-lon').textContent = lon?.toFixed(6) || '-';\r\n  }\r\n\r\n  stopCamera() {\r\n    console.log('Stopping camera...');\r\n    try {\r\n      if (this._stream) {\r\n        this._stream.getTracks().forEach(track => {\r\n          console.log('Stopping track:', track.kind);\r\n          track.stop();\r\n        });\r\n        this._stream = null;\r\n        console.log('Camera stopped successfully');\r\n      }\r\n      if (this.container) {\r\n        const video = this.container.querySelector('#camera');\r\n        if (video) {\r\n          video.pause();\r\n          video.srcObject = null;\r\n          video.style.display = 'none';\r\n        }\r\n        const canvas = this.container.querySelector('#snapshot');\r\n        if (canvas) canvas.style.display = 'none';\r\n      }\r\n    } catch (error) {\r\n      console.warn('stopCamera error:', error);\r\n    }\r\n  }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jZXJpdGFhcHAvLi9zcmMvdmlld3MvYWRkU3RvcnlWaWV3LmpzP2NlN2QiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEwgZnJvbSAnbGVhZmxldCc7XHJcblxyXG5jb25zdCBsb2NhdGlvbkljb24gPSBMLmljb24oe1xyXG4gIGljb25Vcmw6ICcvYXNzZXRzL3BsYWNlXzI0ZHBfNTk4NUUxLnBuZycsIC8vIFBhc3Rpa2FuIGlrb24gc3VkYWggdGVyc2VkaWEgZGkgcHVibGljL2Fzc2V0c1xyXG4gIGljb25TaXplOiBbMzIsIDMyXSxcclxuICBpY29uQW5jaG9yOiBbMTYsIDMyXSxcclxuICBwb3B1cEFuY2hvcjogWzAsIC0zMl0sXHJcbn0pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQWRkU3RvcnlWaWV3IHtcclxuICBjb25zdHJ1Y3Rvcihjb250YWluZXIpIHtcclxuICAgIGlmICghY29udGFpbmVyKSB0aHJvdyBuZXcgRXJyb3IoJ0NvbnRhaW5lciBlbGVtZW50IGlzIHJlcXVpcmVkJyk7XHJcbiAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgIHRoaXMudGFrZW5QaWN0dXJlcyA9IFtdO1xyXG4gICAgdGhpcy5zZWxlY3RlZExvY2F0aW9uID0geyBsYXQ6IG51bGwsIGxvbjogbnVsbCB9O1xyXG4gICAgdGhpcy5fc3RyZWFtID0gbnVsbDtcclxuICAgIHRoaXMuX21hcCA9IG51bGw7XHJcbiAgICB0aGlzLl9tYXJrZXIgPSBudWxsO1xyXG5cclxuICAgIHRoaXMub25TdWJtaXQgPSBudWxsO1xyXG4gICAgdGhpcy5vbkNhbmNlbCA9IG51bGw7XHJcbiAgICB0aGlzLm9uVGFrZVBob3RvID0gbnVsbDtcclxuICAgIHRoaXMub25VcGxvYWRQaG90byA9IG51bGw7XHJcbiAgICBcclxuICAgIC8vIFBhc3Rpa2FuIGthbWVyYSBkaW1hdGlrYW4gc2FhdCBuYXZpZ2FzaSBiZXJ1YmFoXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsICgpID0+IHtcclxuICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5oYXNoICE9PSAnI2FkZC1zdG9yeScpIHtcclxuICAgICAgICB0aGlzLnN0b3BDYW1lcmEoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICB0aGlzLmNvbnRhaW5lci5pbm5lckhUTUwgPSBgXHJcbiAgICAgIDxzdHlsZT5cclxuICAgICAgICAuY2FtZXJhLXBlcm1pc3Npb24tcHJvbXB0IHtcclxuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmMGY4ZmY7XHJcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjNTk4NWUxO1xyXG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xyXG4gICAgICAgICAgcGFkZGluZzogMjBweDtcclxuICAgICAgICAgIG1hcmdpbjogMTBweCAwO1xyXG4gICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgICAgIH1cclxuICAgICAgICAuY2FtZXJhLXBlcm1pc3Npb24tcHJvbXB0IHAge1xyXG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTVweDtcclxuICAgICAgICAgIGNvbG9yOiAjMzMzO1xyXG4gICAgICAgIH1cclxuICAgICAgPC9zdHlsZT5cclxuICAgICAgPGgyIHN0eWxlPVwidGV4dC1hbGlnbjpjZW50ZXI7IG1hcmdpbi1ib3R0b206MjBweDtcIj5UYW1iYWggQ2VyaXRhIEJhcnU8L2gyPlxyXG4gICAgICA8Zm9ybSBpZD1cInN0b3J5Rm9ybVwiIGNsYXNzPVwic3RvcnktZm9ybVwiIG5vdmFsaWRhdGU+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tY29udHJvbFwiPlxyXG4gICAgICAgICAgPGxhYmVsIGZvcj1cInRpdGxlXCI+SnVkdWwgQ2VyaXRhOjwvbGFiZWw+XHJcbiAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBpZD1cInRpdGxlXCIgbmFtZT1cInRpdGxlXCIgcGxhY2Vob2xkZXI9XCJNYXN1a2thbiBqdWR1bCBjZXJpdGFcIiByZXF1aXJlZCAvPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIj5cclxuICAgICAgICAgIDxsYWJlbCBmb3I9XCJkZXNjXCI+RGVza3JpcHNpIENlcml0YTo8L2xhYmVsPlxyXG4gICAgICAgICAgPHRleHRhcmVhIGlkPVwiZGVzY1wiIG5hbWU9XCJkZXNjXCIgcmVxdWlyZWQgcGxhY2Vob2xkZXI9XCJUdWxpc2thbiBkZXNrcmlwc2kgY2VyaXRhIEFuZGEuLi5cIj48L3RleHRhcmVhPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIj5cclxuICAgICAgICAgIDxsYWJlbCBmb3I9XCJkYXRlXCI+VGFuZ2dhbCBDZXJpdGE6PC9sYWJlbD5cclxuICAgICAgICAgIDxpbnB1dCB0eXBlPVwiZGF0ZVwiIGlkPVwiZGF0ZVwiIG5hbWU9XCJkYXRlXCIgcmVxdWlyZWQgdmFsdWU9XCIke25ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdfVwiIC8+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tY29udHJvbFwiPlxyXG4gICAgICAgICAgPGxhYmVsPkFtYmlsIEdhbWJhciBkZW5nYW4gS2FtZXJhOjwvbGFiZWw+XHJcbiAgICAgICAgICA8dmlkZW8gaWQ9XCJjYW1lcmFcIiBhdXRvcGxheSBtdXRlZCBwbGF5c2lubGluZT48L3ZpZGVvPlxyXG4gICAgICAgICAgPGNhbnZhcyBpZD1cInNuYXBzaG90XCIgc3R5bGU9XCJkaXNwbGF5Om5vbmU7XCI+PC9jYW52YXM+XHJcbiAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBpZD1cImNhcHR1cmVcIiBjbGFzcz1cImJ0biBidG4tb3V0bGluZVwiPkFtYmlsIEZvdG88L2J1dHRvbj5cclxuICAgICAgICAgIDx1bCBpZD1cInRha2VuLXBpY3R1cmVzLWxpc3RcIiBjbGFzcz1cInRha2VuLXBpY3R1cmVzLWxpc3RcIj48L3VsPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIj5cclxuICAgICAgICAgIDxsYWJlbD5BdGF1IFVwbG9hZCBHYW1iYXI6PC9sYWJlbD5cclxuICAgICAgICAgIDxpbnB1dCB0eXBlPVwiZmlsZVwiIGlkPVwiZmlsZVVwbG9hZFwiIGFjY2VwdD1cImltYWdlLypcIiBtdWx0aXBsZSAvPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIj5cclxuICAgICAgICAgIDxsYWJlbD5QaWxpaCBMb2thc2kgKGtsaWsgcGFkYSBwZXRhKTo8L2xhYmVsPlxyXG4gICAgICAgICAgPGRpdiBpZD1cIm1hcFwiIHN0eWxlPVwiaGVpZ2h0OjMwMHB4O1wiPjwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBpZD1cImxvY2F0aW9uLWRpc3BsYXlcIj5cclxuICAgICAgICAgICAgTG9rYXNpIGRpcGlsaWg6IDxzcGFuIGlkPVwibG9jYXRpb24tbGF0XCI+LTwvc3Bhbj4sIDxzcGFuIGlkPVwibG9jYXRpb24tbG9uXCI+LTwvc3Bhbj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWJ1dHRvbnNcIj5cclxuICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidG5cIiB0eXBlPVwic3VibWl0XCI+S2lyaW0gQ2VyaXRhPC9idXR0b24+XHJcbiAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBpZD1cImNhbmNlbC1idXR0b25cIiBjbGFzcz1cImJ0biBidG4tb3V0bGluZVwiPkJhdGFsPC9idXR0b24+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZm9ybT5cclxuICAgIGA7XHJcblxyXG4gICAgdGhpcy4jYmluZEV2ZW50cygpO1xyXG4gICAgLy8gVGlkYWsgbWVtYW5nZ2lsIHNldHVwQ2FtZXJhIGRpIHNpbmkgbGFnaSwga2FyZW5hIGFrYW4gZGlwYW5nZ2lsIGRhcmkgcHJlc2VudGVyXHJcbiAgICB0aGlzLiNzZXR1cE1hcCgpO1xyXG4gICAgXHJcbiAgICAvLyBTaW1wYW4gaW5zdGFuY2UgaW5pIGtlIHdpbmRvdyBhZ2FyIGJpc2EgZGlha3NlcyBnbG9iYWwgdW50dWsgbWVtYXRpa2FuIGthbWVyYVxyXG4gICAgd2luZG93LmN1cnJlbnRBZGRTdG9yeVZpZXcgPSB0aGlzO1xyXG4gIH1cclxuXHJcbiAgI2JpbmRFdmVudHMoKSB7XHJcbiAgICBjb25zdCBmb3JtID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignI3N0b3J5Rm9ybScpO1xyXG4gICAgY29uc3QgY2FwdHVyZUJ0biA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyNjYXB0dXJlJyk7XHJcbiAgICBjb25zdCBmaWxlVXBsb2FkID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignI2ZpbGVVcGxvYWQnKTtcclxuICAgIGNvbnN0IGNhbmNlbEJ0biA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyNjYW5jZWwtYnV0dG9uJyk7XHJcbiAgICBjb25zdCB2aWRlbyA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyNjYW1lcmEnKTtcclxuICAgIGNvbnN0IGNhbnZhcyA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyNzbmFwc2hvdCcpO1xyXG5cclxuICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgIGlmICghZm9ybS5jaGVja1ZhbGlkaXR5KCkpIHtcclxuICAgICAgICBmb3JtLnJlcG9ydFZhbGlkaXR5KCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodGhpcy50YWtlblBpY3R1cmVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIGFsZXJ0KCdBbmRhIGhhcnVzIG1lbmFtYmFoa2FuIG1pbmltYWwgc2F0dSBnYW1iYXIuJyk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBwaG90b0ZpbGUgPSB0aGlzLnRha2VuUGljdHVyZXNbMF07XHJcbiAgICAgIGlmIChwaG90b0ZpbGUuc2l6ZSA+IDEwMjQgKiAxMDI0KSB7XHJcbiAgICAgICAgYWxlcnQoJ1VrdXJhbiBnYW1iYXIgbWFrc2ltYWwgMU1CLicpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gVmFsaWRhc2kgbG9rYXNpXHJcbiAgICAgIGlmICghdGhpcy5zZWxlY3RlZExvY2F0aW9uLmxhdCB8fCAhdGhpcy5zZWxlY3RlZExvY2F0aW9uLmxvbikge1xyXG4gICAgICAgIGFsZXJ0KCdBbmRhIGhhcnVzIG1lbWlsaWggbG9rYXNpIHBhZGEgcGV0YS4nKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0aGlzLm9uU3VibWl0KSB7XHJcbiAgICAgICAgY29uc3QgdGl0bGUgPSBmb3JtLmVsZW1lbnRzWyd0aXRsZSddLnZhbHVlLnRyaW0oKTtcclxuICAgICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGZvcm0uZWxlbWVudHNbJ2Rlc2MnXS52YWx1ZS50cmltKCk7XHJcbiAgICAgICAgY29uc3QgZGF0ZSA9IGZvcm0uZWxlbWVudHNbJ2RhdGUnXS52YWx1ZTtcclxuXHJcbiAgICAgICAgY29uc3QgZnVsbERlc2NyaXB0aW9uID0gYCR7dGl0bGV9XFxuXFxuJHtkZXNjcmlwdGlvbn1cXG5cXG5UYW5nZ2FsOiAke2RhdGV9YDtcclxuXHJcbiAgICAgICAgdGhpcy5vblN1Ym1pdChmdWxsRGVzY3JpcHRpb24sIHBob3RvRmlsZSwgdGhpcy5zZWxlY3RlZExvY2F0aW9uKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgY2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICBpZiAodGhpcy5vbkNhbmNlbCkgdGhpcy5vbkNhbmNlbCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgY2FwdHVyZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgaWYgKCF2aWRlby52aWRlb1dpZHRoIHx8ICF2aWRlby52aWRlb0hlaWdodCkge1xyXG4gICAgICAgIGFsZXJ0KCdWaWRlbyBrYW1lcmEgYmVsdW0gc2lhcC4nKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG4gICAgICBjYW52YXMud2lkdGggPSB2aWRlby52aWRlb1dpZHRoO1xyXG4gICAgICBjYW52YXMuaGVpZ2h0ID0gdmlkZW8udmlkZW9IZWlnaHQ7XHJcbiAgICAgIGNvbnRleHQuZHJhd0ltYWdlKHZpZGVvLCAwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xyXG4gICAgICBjYW52YXMuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgICAgIHZpZGVvLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcblxyXG4gICAgICBjYW52YXMudG9CbG9iKGJsb2IgPT4ge1xyXG4gICAgICAgIGlmIChibG9iKSB7XHJcbiAgICAgICAgICB0aGlzLmFkZFRha2VuUGljdHVyZShibG9iKTtcclxuICAgICAgICAgIGlmICh0aGlzLm9uVGFrZVBob3RvKSB0aGlzLm9uVGFrZVBob3RvKGJsb2IpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSwgJ2ltYWdlL2pwZWcnLCAwLjgpOyAvLyBLb21wcmVzIGdhbWJhciB1bnR1ayBtZW5ndXJhbmdpIHVrdXJhblxyXG4gICAgfSk7XHJcblxyXG4gICAgZmlsZVVwbG9hZC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBlID0+IHtcclxuICAgICAgY29uc3QgZmlsZXMgPSBBcnJheS5mcm9tKGUudGFyZ2V0LmZpbGVzKTtcclxuICAgICAgZmlsZXMuZm9yRWFjaChmaWxlID0+IHtcclxuICAgICAgICBpZiAoZmlsZS50eXBlLnN0YXJ0c1dpdGgoJ2ltYWdlLycpKSB7XHJcbiAgICAgICAgICB0aGlzLmFkZFRha2VuUGljdHVyZShmaWxlKTtcclxuICAgICAgICAgIGlmICh0aGlzLm9uVXBsb2FkUGhvdG8pIHRoaXMub25VcGxvYWRQaG90byhmaWxlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICBmaWxlVXBsb2FkLnZhbHVlID0gJyc7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHNldHVwQ2FtZXJhKCkge1xyXG4gICAgY29uc3QgdmlkZW8gPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjY2FtZXJhJyk7XHJcblxyXG4gICAgLy8gUGFzdGlrYW4ga2FtZXJhIHNlYmVsdW1ueWEgZGltYXRpa2FuIGR1bHVcclxuICAgIHRoaXMuc3RvcENhbWVyYSgpO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKCdTZXR0aW5nIHVwIGNhbWVyYS4uLicpO1xyXG4gICAgXHJcbiAgICAvLyBNaW50YSBpemluIGthbWVyYSBsYW5nc3VuZ1xyXG4gICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoeyB2aWRlbzogdHJ1ZSB9KVxyXG4gICAgICAudGhlbihzdHJlYW0gPT4ge1xyXG4gICAgICAgIHRoaXMuX3N0cmVhbSA9IHN0cmVhbTtcclxuICAgICAgICB2aWRlby5zcmNPYmplY3QgPSBzdHJlYW07XHJcbiAgICAgICAgdmlkZW8uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgICAgICAgY29uc3QgY2FudmFzID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignI3NuYXBzaG90Jyk7XHJcbiAgICAgICAgaWYgKGNhbnZhcykgY2FudmFzLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0NhbWVyYSBzdGFydGVkIHN1Y2Nlc3NmdWxseScpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdUaWRhayBkYXBhdCBtZW5nYWtzZXMga2FtZXJhJywgZXJyKTtcclxuICAgICAgICBhbGVydCgnQWtzZXMga2FtZXJhIGRpdG9sYWsgYXRhdSB0aWRhayB0ZXJzZWRpYS4gU2lsYWthbiBpemlua2FuIGFrc2VzIGthbWVyYSBkaSBwZW5nYXR1cmFuIGJyb3dzZXIgQW5kYS4nKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICAjc2V0dXBNYXAoKSB7XHJcbiAgICBjb25zdCBkZWZhdWx0TGF0TG5nID0gWy0yLjUsIDExNy41XTtcclxuICAgIHRoaXMuX21hcCA9IEwubWFwKCdtYXAnKS5zZXRWaWV3KGRlZmF1bHRMYXRMbmcsIDUpO1xyXG5cclxuICAgIEwudGlsZUxheWVyKCdodHRwczovL3tzfS50aWxlLm9wZW5zdHJlZXRtYXAub3JnL3t6fS97eH0ve3l9LnBuZycsIHtcclxuICAgICAgYXR0cmlidXRpb246ICfCqSBPcGVuU3RyZWV0TWFwIGNvbnRyaWJ1dG9ycycsXHJcbiAgICB9KS5hZGRUbyh0aGlzLl9tYXApO1xyXG5cclxuICAgIHRoaXMuX21hcmtlciA9IG51bGw7XHJcblxyXG4gICAgdGhpcy5fbWFwLm9uKCdjbGljaycsIGUgPT4ge1xyXG4gICAgICBjb25zdCB7IGxhdCwgbG5nIH0gPSBlLmxhdGxuZztcclxuICAgICAgaWYgKHRoaXMuX21hcmtlcikge1xyXG4gICAgICAgIHRoaXMuX21hcmtlci5zZXRMYXRMbmcoZS5sYXRsbmcpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuX21hcmtlciA9IEwubWFya2VyKGUubGF0bG5nLCB7IGljb246IGxvY2F0aW9uSWNvbiB9KS5hZGRUbyh0aGlzLl9tYXApO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMudXBkYXRlTG9jYXRpb24obGF0LCBsbmcpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGRUYWtlblBpY3R1cmUoYmxvYikge1xyXG4gICAgdGhpcy50YWtlblBpY3R1cmVzLnB1c2goYmxvYik7XHJcbiAgICB0aGlzLiNyZW5kZXJUYWtlblBpY3R1cmVzKCk7XHJcbiAgfVxyXG5cclxuICAjcmVuZGVyVGFrZW5QaWN0dXJlcygpIHtcclxuICAgIGNvbnN0IGxpc3QgPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjdGFrZW4tcGljdHVyZXMtbGlzdCcpO1xyXG4gICAgbGlzdC5pbm5lckhUTUwgPSAnJztcclxuICAgIHRoaXMudGFrZW5QaWN0dXJlcy5mb3JFYWNoKChibG9iLCBpKSA9PiB7XHJcbiAgICAgIGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcclxuICAgICAgbGkuY2xhc3NOYW1lID0gJ3Rha2VuLXBpY3R1cmVzLWxpc3RfX2l0ZW0nO1xyXG5cclxuICAgICAgY29uc3QgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XHJcbiAgICAgIGltZy5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xyXG4gICAgICBpbWcuYWx0ID0gYEZvdG8gZG9rdW1lbnRhc2kgJHtpICsgMX1gO1xyXG4gICAgICBpbWcud2lkdGggPSAxMDA7XHJcblxyXG4gICAgICBjb25zdCBidG5EZWxldGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgYnRuRGVsZXRlLnR5cGUgPSAnYnV0dG9uJztcclxuICAgICAgYnRuRGVsZXRlLmNsYXNzTmFtZSA9ICdkZWxldGUtcGljdHVyZS1idG4nO1xyXG4gICAgICBidG5EZWxldGUudGl0bGUgPSAnSGFwdXMgZm90byBpbmknO1xyXG4gICAgICBidG5EZWxldGUudGV4dENvbnRlbnQgPSAnw5cnO1xyXG5cclxuICAgICAgYnRuRGVsZXRlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMudGFrZW5QaWN0dXJlcy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgdGhpcy4jcmVuZGVyVGFrZW5QaWN0dXJlcygpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGxpLmFwcGVuZENoaWxkKGltZyk7XHJcbiAgICAgIGxpLmFwcGVuZENoaWxkKGJ0bkRlbGV0ZSk7XHJcbiAgICAgIGxpc3QuYXBwZW5kQ2hpbGQobGkpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVMb2NhdGlvbihsYXQsIGxvbikge1xyXG4gICAgdGhpcy5zZWxlY3RlZExvY2F0aW9uID0geyBsYXQsIGxvbiB9O1xyXG4gICAgdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignI2xvY2F0aW9uLWxhdCcpLnRleHRDb250ZW50ID0gbGF0Py50b0ZpeGVkKDYpIHx8ICctJztcclxuICAgIHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyNsb2NhdGlvbi1sb24nKS50ZXh0Q29udGVudCA9IGxvbj8udG9GaXhlZCg2KSB8fCAnLSc7XHJcbiAgfVxyXG5cclxuICBzdG9wQ2FtZXJhKCkge1xyXG4gICAgY29uc29sZS5sb2coJ1N0b3BwaW5nIGNhbWVyYS4uLicpO1xyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKHRoaXMuX3N0cmVhbSkge1xyXG4gICAgICAgIHRoaXMuX3N0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKHRyYWNrID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdTdG9wcGluZyB0cmFjazonLCB0cmFjay5raW5kKTtcclxuICAgICAgICAgIHRyYWNrLnN0b3AoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLl9zdHJlYW0gPSBudWxsO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdDYW1lcmEgc3RvcHBlZCBzdWNjZXNzZnVsbHknKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5jb250YWluZXIpIHtcclxuICAgICAgICBjb25zdCB2aWRlbyA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyNjYW1lcmEnKTtcclxuICAgICAgICBpZiAodmlkZW8pIHtcclxuICAgICAgICAgIHZpZGVvLnBhdXNlKCk7XHJcbiAgICAgICAgICB2aWRlby5zcmNPYmplY3QgPSBudWxsO1xyXG4gICAgICAgICAgdmlkZW8uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgY2FudmFzID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignI3NuYXBzaG90Jyk7XHJcbiAgICAgICAgaWYgKGNhbnZhcykgY2FudmFzLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUud2Fybignc3RvcENhbWVyYSBlcnJvcjonLCBlcnJvcik7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/views/addStoryView.js\n");

/***/ })

}]);